[
  {
    "objectID": "generate_picks.html",
    "href": "generate_picks.html",
    "title": "",
    "section": "",
    "text": "import pandas as pd\nfrom itertools import combinations\nfrom random import sample\n\n\n# Unique teams from the fixtures (can't find a list)\ndf_fixtures = pd.read_csv(\"https://fixturedownload.com/download/fifa-world-cup-2022-UTC.csv\")\ndf_fixtures = df_fixtures[df_fixtures[\"Round Number\"] == \"1\"]\nteams = set(df_fixtures[\"Home Team\"]) | set(df_fixtures[\"Away Team\"])\n\n\n# List of players\nplayers = [\n    \"Adam Ivison\", \n    \"Dan Wilson\",\n    \"Ryan Lowes\",\n    \"Anthony Chapman\",\n    \"Grant Willis\",\n    \"Jack Maddison\",\n    \"Liam Robson\",\n    \"Adam Lowes\",\n    \"Cal Craig\",\n    \"Liam Smith\",\n    \"Paul Smith\",\n    \"Ricky Wells\",\n    \"Connor Sweeney\",\n    \"Will Forrester\",\n    \"Liam Murtha\",\n    \"Sean Jackson\",\n    \"Chris Royal\",\n    \"Lee Carrick\",\n    \"Martin Young\",\n    \"Danielle Young\",\n    \"Adam Carrick\",\n    \"Georgia Wilson\",\n    \"Claire Hodkinson\",\n    \"Lee Mayne\",\n    \"Helen Wilson\",\n  ]\n\n\n# Assign each player a random combination of 3 teams\npossible_picks = list(combinations(teams, 3))\npicks = sample(possible_picks, len(players))\nplayers_picks = zip(players, [sorted(p) for p in picks])\n\n\n# Convert to dataframe\ndf_players_picks = pd.DataFrame(players_picks, columns=[\"name\", \"picks\"])\n\n\ndf_players_picks\n\n\n\n  \n    \n      \n\n\n  \n    \n      \n      name\n      picks\n    \n  \n  \n    \n      0\n      Adam Ivison\n      [England, Iran, Uruguay]\n    \n    \n      1\n      Dan Wilson\n      [Croatia, Ecuador, Germany]\n    \n    \n      2\n      Ryan Lowes\n      [Denmark, Ghana, Mexico]\n    \n    \n      3\n      Anthony Chapman\n      [England, Mexico, Spain]\n    \n    \n      4\n      Grant Willis\n      [Denmark, Qatar, Saudi Arabia]\n    \n    \n      5\n      Jack Maddison\n      [Ecuador, Mexico, Serbia]\n    \n    \n      6\n      Liam Robson\n      [Ghana, Morocco, Senegal]\n    \n    \n      7\n      Adam Lowes\n      [Argentina, Cameroon, Serbia]\n    \n    \n      8\n      Cal Craig\n      [Morocco, Netherlands, Tunisia]\n    \n    \n      9\n      Liam Smith\n      [Netherlands, Serbia, Tunisia]\n    \n    \n      10\n      Paul Smith\n      [Cameroon, England, Portugal]\n    \n    \n      11\n      Ricky Wells\n      [Belgium, Spain, USA]\n    \n    \n      12\n      Connor Sweeney\n      [Morocco, Qatar, Senegal]\n    \n    \n      13\n      Will Forrester\n      [Denmark, Serbia, Switzerland]\n    \n    \n      14\n      Liam Murtha\n      [Cameroon, Mexico, Uruguay]\n    \n    \n      15\n      Sean Jackson\n      [Costa Rica, Portugal, Wales]\n    \n    \n      16\n      Chris Royal\n      [Croatia, Ghana, Iran]\n    \n    \n      17\n      Lee Carrick\n      [France, Netherlands, Portugal]\n    \n    \n      18\n      Martin Young\n      [Belgium, Canada, Senegal]\n    \n    \n      19\n      Danielle Young\n      [Canada, Senegal, Switzerland]\n    \n    \n      20\n      Adam Carrick\n      [Belgium, Costa Rica, Ecuador]\n    \n    \n      21\n      Georgia Wilson\n      [Australia, Belgium, Mexico]\n    \n    \n      22\n      Claire Hodkinson\n      [Belgium, England, Ghana]\n    \n    \n      23\n      Lee Mayne\n      [Ecuador, Germany, Netherlands]\n    \n    \n      24\n      Helen Wilson\n      [Costa Rica, Germany, Uruguay]\n    \n  \n\n\n      \n        \n  \n    \n    \n  \n      \n      \n  \n\n      \n    \n  \n  \n\n\n\n# Write the picks out to a file\ndf_players_picks.to_csv(\"df_players_picks.csv\", index=False)\n\n\n# Check that all the picks are unique\nlen(df_players_picks[\"picks\"].drop_duplicates()) == len(df_players_picks.index)\n\nTrue"
  },
  {
    "objectID": "get_goals_for_picks.html",
    "href": "get_goals_for_picks.html",
    "title": "World Cup Blackjack",
    "section": "",
    "text": "Code\nimport pandas as pd\n\n\n\n\nCode\n# Pull the known results\ndf_fixtures = pd.read_csv(\"https://fixturedownload.com/download/fifa-world-cup-2022-UTC.csv\")\ndf_results = df_fixtures[df_fixtures[\"Result\"].notna()]\n\n\n\n\nCode\n# Split Result into home goals and away goals\ndf_results[\"Home Goals\"] = df_results[\"Result\"].apply(lambda x: int(x.split(\"-\")[0]))\ndf_results[\"Away Goals\"] = df_results[\"Result\"].apply(lambda x: int(x.split(\"-\")[1]))\n\n\n/tmp/ipykernel_22654/3602420346.py:2: SettingWithCopyWarning:\n\n\nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n\n/tmp/ipykernel_22654/3602420346.py:3: SettingWithCopyWarning:\n\n\nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n\n\n\n\n\nCode\n# Get the total goals for each team\ndf_goals = pd.concat(\n    [\n        df_results[[f\"{x} Team\", f\"{x} Goals\"]].rename(columns = lambda x: x.split(\" \")[1]) \n        for x in [\"Home\", \"Away\"]\n    ]\n)\ndf_goals = df_goals.groupby(\"Team\")[[\"Goals\"]].sum().reset_index()\n\n\n\n\nCode\n# Read the players picks\ndf_players_picks = pd.read_csv(\"df_players_picks.csv\")\n\n\n\n\nCode\n# Clean the players picks\ndf_players_picks = df_players_picks.set_index(\"name\")\ndf_players_picks[\"picks\"] = df_players_picks[\"picks\"].apply(lambda x: x.replace(\"[\", \"\").replace(\"]\", \"\").replace(\"'\", \"\"))\n\n\n\n\nCode\n# Convert the picks into seperate columns\ndf_players_goals = pd.DataFrame(df_players_picks[\"picks\"].str.split(\", \").tolist(), index=df_players_picks.index)\n\n\n\n\nCode\n# Convert to long\ndf_players_goals = df_players_goals.stack().to_frame(\"Team\")\ndf_players_goals.index = df_players_goals.index.droplevel(1)\n\n\n\n\nCode\n# Join the goals and aggregate to each player\ndf_players_goals = pd.merge(df_players_goals.reset_index(), df_goals, on=\"Team\", how=\"left\").fillna(0)\ndf_players_goals = df_players_goals.groupby(\"name\")[[\"Goals\"]].sum().astype(int)\n\n\n\n\nCode\n# Join the total goals the the original dataframe\ndf_players_picks_with_goals = df_players_picks.join(df_players_goals)\n\n\n\n\nCode\ndf_players_picks_with_goals\n\n\n\n\n\n\n  \n    \n      \n      picks\n      Goals\n    \n    \n      name\n      \n      \n    \n  \n  \n    \n      Adam Ivison\n      England, Iran, Uruguay\n      0\n    \n    \n      Dan Wilson\n      Croatia, Ecuador, Germany\n      2\n    \n    \n      Ryan Lowes\n      Denmark, Ghana, Mexico\n      0\n    \n    \n      Anthony Chapman\n      England, Mexico, Spain\n      0\n    \n    \n      Grant Willis\n      Denmark, Qatar, Saudi Arabia\n      0\n    \n    \n      Jack Maddison\n      Ecuador, Mexico, Serbia\n      2\n    \n    \n      Liam Robson\n      Ghana, Morocco, Senegal\n      0\n    \n    \n      Adam Lowes\n      Argentina, Cameroon, Serbia\n      0\n    \n    \n      Cal Craig\n      Morocco, Netherlands, Tunisia\n      0\n    \n    \n      Liam Smith\n      Netherlands, Serbia, Tunisia\n      0\n    \n    \n      Paul Smith\n      Cameroon, England, Portugal\n      0\n    \n    \n      Ricky Wells\n      Belgium, Spain, USA\n      0\n    \n    \n      Connor Sweeney\n      Morocco, Qatar, Senegal\n      0\n    \n    \n      Will Forrester\n      Denmark, Serbia, Switzerland\n      0\n    \n    \n      Liam Murtha\n      Cameroon, Mexico, Uruguay\n      0\n    \n    \n      Sean Jackson\n      Costa Rica, Portugal, Wales\n      0\n    \n    \n      Chris Royal\n      Croatia, Ghana, Iran\n      0\n    \n    \n      Lee Carrick\n      France, Netherlands, Portugal\n      0\n    \n    \n      Martin Young\n      Belgium, Canada, Senegal\n      0\n    \n    \n      Danielle Young\n      Canada, Senegal, Switzerland\n      0\n    \n    \n      Adam Carrick\n      Belgium, Costa Rica, Ecuador\n      2\n    \n    \n      Georgia Wilson\n      Australia, Belgium, Mexico\n      0\n    \n    \n      Claire Hodkinson\n      Belgium, England, Ghana\n      0\n    \n    \n      Lee Mayne\n      Ecuador, Germany, Netherlands\n      2\n    \n    \n      Helen Wilson\n      Costa Rica, Germany, Uruguay\n      0"
  }
]